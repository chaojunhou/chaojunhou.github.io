<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="google-site-verification" content="fdZTDVFyX3hKovPIzn1tgPixk_wysBXaPN8YQw1P8Jw" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="ChaoJun Hou" />
        <meta name="copyright" content="ChaoJun Hou" />

<meta name="keywords" content="算法, 编程, " />

<meta property="og:title" content="回溯与分支限界 "/>
<meta property="og:url" content="../../../../../blog/2013/12/22/hui-su-yu-fen-zhi-xian-jie/" />
<meta property="og:description" content="回溯 对于搜索问题和优化问题，它们的解分布在一个解空间里，求解这些搜索问题的算法 就是一种遍历搜索解空间的系统方法。回溯算法将搜索空间看作一定的结构，一个解对应于树中的一片树叶。算法从 根节点出发，尝试所有可达的节点。当不能前进时，就后退一步或若干步，再从另一个节点继续 搜索，知道所有的节点都尝试过，为了加快搜索，通常使用分支限界等剪枝方法。同时需要记录解的路径 重复访问和重复解 重复访问 在图等数据结构的访问中，经常会出现重复访问的情况，这时需要记录临时访问到的节点，然后在访问结束时要恢复临时节点的值。 重复解 在枚举所有解的情况时，如果当前访问的层的节点值和pre层的节点值相等就会出现重复解的情况，需要记录pre层访问的节点值来解决这种情况。 N皇后 The n-queens puzzle is the problem of placing n queens on an n×n chessboard such that no two queens attack ..." />
<meta property="og:site_name" content="Write the Code" />
<meta property="og:article:author" content="ChaoJun Hou" />
<meta property="og:article:published_time" content="2013-12-22T00:00:00+08:00" />
<meta name="twitter:title" content="回溯与分支限界 ">
<meta name="twitter:description" content="回溯 对于搜索问题和优化问题，它们的解分布在一个解空间里，求解这些搜索问题的算法 就是一种遍历搜索解空间的系统方法。回溯算法将搜索空间看作一定的结构，一个解对应于树中的一片树叶。算法从 根节点出发，尝试所有可达的节点。当不能前进时，就后退一步或若干步，再从另一个节点继续 搜索，知道所有的节点都尝试过，为了加快搜索，通常使用分支限界等剪枝方法。同时需要记录解的路径 重复访问和重复解 重复访问 在图等数据结构的访问中，经常会出现重复访问的情况，这时需要记录临时访问到的节点，然后在访问结束时要恢复临时节点的值。 重复解 在枚举所有解的情况时，如果当前访问的层的节点值和pre层的节点值相等就会出现重复解的情况，需要记录pre层访问的节点值来解决这种情况。 N皇后 The n-queens puzzle is the problem of placing n queens on an n×n chessboard such that no two queens attack ...">

        <title>回溯与分支限界  · Change the World | Write the Code
</title>
       
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../../../../../theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../../../../../theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="../../../../../theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="../../../../../theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="../../../../../theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="../../../../../theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="../../../../../theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="../../../../../theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="../../../../../theme/images/apple-touch-icon-144x144.png" />
        <link href="www.houcj.net/feed.xml" type="application/rss+xml" rel="alternate" title="Write the Code - Full RSS Feed" />
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '61957498', 'auto');
    ga('send', 'pageview');
</script>

    </head>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61957498-1', 'auto');
  ga('send', 'pageview');

	</script>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../../../../"><span class=site-name>Write the Code</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="../../../../..">Home</a></li>
                            <li ><a href="../../../../../pages/About.html">About</a></li>
                            <li ><a href="../../../../../random.html">Pick One!</a></li>
                            <li ><a href="../../../../../categories.html">分类</a></li>
                            <li ><a href="../../../../../tags.html">标签</a></li>
                            <li ><a href="../../../../../archives.html">归档</a></li>
                            <li><form class="navbar-search" action="../../../../../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="../../../../../blog/2013/12/22/hui-su-yu-fen-zhi-xian-jie/"> 回溯与分支限界  </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <html><body><div id="toc"><ul><li><a class="toc-href" href="#" title="回溯与分支限界">回溯与分支限界</a><ul><li><a class="toc-href" href="#_1" title="回溯">回溯</a><ul><li><a class="toc-href" href="#_2" title="重复访问和重复解">重复访问和重复解</a><ul><li><a class="toc-href" href="#_3" title="重复访问">重复访问</a></li><li><a class="toc-href" href="#_4" title="重复解">重复解</a></li></ul></li><li><a class="toc-href" href="#n_1" title="N皇后">N皇后</a><ul><li><a class="toc-href" href="#_5" title="分析">分析</a></li><li><a class="toc-href" href="#python-code" title="Python Code">Python Code</a></li></ul></li><li><a class="toc-href" href="#combination-sum-iii_1" title="Combination Sum III">Combination Sum III</a><ul><li><a class="toc-href" href="#_6" title="分析">分析</a></li><li><a class="toc-href" href="#python-code_1" title="Python Code">Python Code</a></li></ul></li><li><a class="toc-href" href="#subset-ii_1" title="SubSet II">SubSet II</a><ul><li><a class="toc-href" href="#_7" title="分析">分析</a></li><li><a class="toc-href" href="#python-code_2" title="Python Code">Python Code</a></li></ul></li><li><a class="toc-href" href="#word-search_1" title="Word Search">Word Search</a><ul><li><a class="toc-href" href="#_8" title="分析">分析</a></li><li><a class="toc-href" href="#python-code_3" title="Python Code">Python Code</a></li></ul></li><li><a class="toc-href" href="#permutations_1" title="Permutations">Permutations</a><ul><li><a class="toc-href" href="#_9" title="分析">分析</a></li><li><a class="toc-href" href="#python-code_4" title="Python Code">Python Code</a></li></ul></li></ul></li></ul></li></ul></div></body></html>
        </nav>
    </div>
    <div class="span8 article-content">

            <hr/>
<h2 id="_1">回溯</h2>
<p><strong>对于搜索问题和优化问题，它们的解分布在一个解空间里，求解这些搜索问题的算法
就是一种遍历搜索解空间的系统方法。回溯算法将搜索空间看作一定的结构，一个解对应于树中的一片树叶。算法从
根节点出发，尝试所有可达的节点。当不能前进时，就后退一步或若干步，再从另一个节点继续
搜索，知道所有的节点都尝试过，为了加快搜索，通常使用分支限界等剪枝方法。同时需要记录解的路径</strong></p>
<h3 id="_2">重复访问和重复解</h3>
<h4 id="_3">重复访问</h4>
<p>在图等数据结构的访问中，经常会出现重复访问的情况，这时需要记录临时访问到的节点，然后在访问结束时要恢复临时节点的值。</p>
<h4 id="_4">重复解</h4>
<p>在枚举所有解的情况时，如果当前访问的层的节点值和pre层的节点值相等就会出现重复解的情况，需要记录pre层访问的节点值来解决这种情况。</p>
<h3 id="n_1">N皇后</h3>
<blockquote>
<p>The n-queens puzzle is the problem of placing n queens on an n&times;n chessboard such that no two queens attack each other.
Given an integer n, return all distinct solutions to the n-queens puzzle.</p>
<p>Each solution contains a distinct board configuration of the n-queens' placement, where 'Q' and '.' both indicate a queen and an empty space respectively.</p>
<p>For example,
There exist two distinct solutions to the 4-queens puzzle:
</p>
</blockquote>
<div class="highlight"><pre><span class="code-line">[</span>
<span class="code-line"> [".Q..",  // Solution 1</span>
<span class="code-line">  "...Q",</span>
<span class="code-line">  "Q...",</span>
<span class="code-line">  "..Q."],</span>
<span class="code-line"> ["..Q.",  // Solution 2</span>
<span class="code-line">  "Q...",</span>
<span class="code-line">  "...Q",</span>
<span class="code-line">  ".Q.."]</span>
<span class="code-line">]</span>
</pre></div>
<h4 id="_5">分析</h4>
<p><strong> 这里有个trick，就是可以用board[row] = col 来表示访问到第row行第col列。然后我们只要使用
长度为N的一纬数组就可以表示这个解。例如[4,2,7,1,3,5,8,6]，表示在第一行皇后放在第4列，...，第8行
中皇后放在第6列。同时DFS遍历时需要注意，排除那些不满足条件的解。</strong></p>
<h4 id="python-code">Python Code</h4>
<div class="highlight"><pre><span class="code-line"><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">solveNQueens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">):</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">res</span> <span class="o">=</span> <span class="p">[]</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,[],</span> <span class="n">n</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">n</span><span class="p">)])</span></span>
<span class="code-line">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">res</span>         </span>
<span class="code-line">    <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">depth</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span></span>
<span class="code-line">            <span class="bp">self</span><span class="o">.</span><span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">answer</span><span class="p">[:])</span> <span class="c"># fast than self.res.append(answer)</span></span>
<span class="code-line">            <span class="k">return</span> </span>
<span class="code-line">        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span></span>
<span class="code-line">            <span class="n">flag</span><span class="o">=</span><span class="bp">True</span></span>
<span class="code-line">            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">depth</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">if</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">col</span> <span class="ow">or</span> <span class="p">(</span><span class="n">depth</span> <span class="o">-</span> <span class="n">row</span><span class="p">)</span> <span class="o">==</span> <span class="nb">abs</span><span class="p">(</span><span class="n">col</span> <span class="o">-</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">]):</span></span>
<span class="code-line">                    <span class="n">flag</span> <span class="o">=</span> <span class="bp">False</span></span>
<span class="code-line">                    <span class="k">break</span></span>
<span class="code-line">            <span class="k">if</span> <span class="n">flag</span><span class="p">:</span></span>
<span class="code-line">                <span class="n">board</span><span class="p">[</span><span class="n">depth</span><span class="p">]</span><span class="o">=</span><span class="n">col</span></span>
<span class="code-line">                <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">depth</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">answer</span><span class="o">+</span><span class="p">[</span><span class="s">'.'</span><span class="o">*</span><span class="n">col</span> <span class="o">+</span> <span class="s">'Q'</span> <span class="o">+</span> <span class="s">'.'</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">)],</span> <span class="n">n</span><span class="p">,</span> <span class="n">board</span><span class="p">)</span></span>
</pre></div>
<h3 id="combination-sum-iii_1">Combination Sum III</h3>
<blockquote>
<p>Find all possible combinations of k numbers that add up to a number n, given that only numbers from 1 to 9 can be used and each combination should be a unique set of numbers.</p>
<p>Ensure that numbers within the set are sorted in ascending order.</p>
<p>Example 1:</p>
<p>Input: k = 3, n = 7</p>
<p>Output:</p>
</blockquote>
<div class="highlight"><pre><span class="code-line">[[1,2,4]]</span>
</pre></div>
<h4 id="_6">分析</h4>
<p><strong>每次都在比前一个解大的基础上进行遍历，直到k个解的和为n。不会重现重复解的情况。</strong></p>
<h4 id="python-code_1">Python Code</h4>
<div class="highlight"><pre><span class="code-line"><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span></span>
<span class="code-line">    <span class="c"># @param {integer} k</span></span>
<span class="code-line">    <span class="c"># @param {integer} n</span></span>
<span class="code-line">    <span class="c"># @return {integer[][]}</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">combinationSum3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">res</span> <span class="o">=</span> <span class="p">[]</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></span>
<span class="code-line">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">res</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]):</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="code-line">            <span class="k">return</span></span>
<span class="code-line">        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></span>
<span class="code-line">            <span class="bp">self</span><span class="o">.</span><span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp</span><span class="p">[:])</span></span>
<span class="code-line">            <span class="k">return</span> </span>
<span class="code-line">        <span class="k">else</span><span class="p">:</span></span>
<span class="code-line">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">:</span></span>
<span class="code-line">                    <span class="k">return</span></span>
<span class="code-line">                <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">tmp</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">])</span></span>
</pre></div>
<h3 id="subset-ii_1">SubSet II</h3>
<blockquote>
<p>Given a collection of integers that might contain duplicates, nums, return all possible subsets.</p>
<p>Note:
- Elements in a subset must be in non-descending order.
- The solution set must not contain duplicate subsets.
For example,
If nums = [1,2,2], a solution is:
</p>
</blockquote>
<div class="highlight"><pre><span class="code-line">[</span>
<span class="code-line">  [2],</span>
<span class="code-line">  [1],</span>
<span class="code-line">  [1,2,2],</span>
<span class="code-line">  [2,2],</span>
<span class="code-line">  [1,2],</span>
<span class="code-line">  []</span>
<span class="code-line">]</span>
</pre></div>
<h4 id="_7">分析</h4>
<p><strong>这里在枚举所有解的时候，可能出现重复解的情况，同时需要一个变量来记录解的路径</strong></p>
<h4 id="python-code_2">Python Code</h4>
<div class="highlight"><pre><span class="code-line"><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">subsetsWithDup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">):</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">res</span><span class="o">=</span><span class="p">[]</span></span>
<span class="code-line">        <span class="n">nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span></span>
<span class="code-line">        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="p">,[],</span><span class="n">nums</span><span class="p">)</span></span>
<span class="code-line">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">res</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">depth</span><span class="p">,</span><span class="n">start</span><span class="p">,</span><span class="n">n</span><span class="p">,</span> <span class="n">ans</span><span class="p">,</span> <span class="n">nums</span><span class="p">):</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">depth</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span></span>
<span class="code-line">            <span class="k">return</span></span>
<span class="code-line">        <span class="n">pre</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">&lt;&lt;</span><span class="mi">10</span></span>
<span class="code-line">        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">            <span class="k">if</span> <span class="n">pre</span> <span class="o">!=</span> <span class="n">nums</span><span class="p">[</span><span class="n">index</span><span class="p">]:</span></span>
<span class="code-line">                <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">depth</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">ans</span><span class="o">+</span><span class="p">[</span><span class="n">nums</span><span class="p">[</span><span class="n">index</span><span class="p">]],</span> <span class="n">nums</span><span class="p">)</span></span>
<span class="code-line">                <span class="n">pre</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>   </span>
</pre></div>
<h3 id="word-search_1">Word Search</h3>
<blockquote>
<p>Given a 2D board and a word, find if the word exists in the grid.</p>
<p>The word can be constructed from letters of sequentially adjacent cell, where "adjacent" cells are those horizontally or vertically neighboring. The same letter cell may not be used more than once.</p>
<p>For example,
Given board =
</p>
</blockquote>
<div class="highlight"><pre><span class="code-line">[</span>
<span class="code-line">  ["ABCE"],</span>
<span class="code-line">  ["SFCS"],</span>
<span class="code-line">  ["ADEE"]</span>
<span class="code-line">]</span>
</pre></div>
<blockquote>
<p>word = "ABCCED", -&gt; returns true,
word = "SEE", -&gt; returns true,
word = "ABCB", -&gt; returns false.</p>
</blockquote>
<h4 id="_8">分析</h4>
<p><strong>DFS搜索的时候，需要以该元素为中心，上下左右进行递归搜索，这时可能出现重复访问的情况。
同时递归搜索要注意边界条件</strong></p>
<h4 id="python-code_3">Python Code</h4>
<div class="highlight"><pre><span class="code-line">        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">board</span><span class="p">)</span></span>
<span class="code-line">        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></span>
<span class="code-line">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span></span>
<span class="code-line">            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">if</span> <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span></span>
<span class="code-line">                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">                        <span class="k">return</span> <span class="bp">True</span></span>
<span class="code-line">        <span class="k">return</span> <span class="bp">False</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span></span>
<span class="code-line">            <span class="k">return</span> <span class="bp">True</span></span>
<span class="code-line">        <span class="n">tmp</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span></span>
<span class="code-line">        <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="s">'#'</span></span>
<span class="code-line">        <span class="c">#up</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">row</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span>  <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">==</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span></span>
<span class="code-line">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">return</span> <span class="bp">True</span></span>
<span class="code-line">        <span class="c">#down</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">==</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span></span>
<span class="code-line">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">return</span> <span class="bp">True</span>           </span>
<span class="code-line">        <span class="c">#left</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">col</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span></span>
<span class="code-line">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">return</span> <span class="bp">True</span></span>
<span class="code-line">        <span class="c">#right</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span></span>
<span class="code-line">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfs</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span></span>
<span class="code-line">                <span class="k">return</span> <span class="bp">True</span></span>
<span class="code-line">        <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="n">tmp</span></span>
<span class="code-line">        <span class="k">return</span> <span class="bp">False</span>  </span>
</pre></div>
<h3 id="permutations_1">Permutations</h3>
<blockquote>
<p>Given a collection of numbers, return all possible permutations.</p>
<p>For example,
[1,2,3] have the following permutations:
[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], and [3,2,1].</p>
</blockquote>
<h4 id="_9">分析</h4>
<p><strong>对于排列问题，首先第一个元素可以出现在排列中的任一个位置，剩下的元素递归的处理，
直到只剩一个元素的时候返回.</strong></p>
<h4 id="python-code_4">Python Code</h4>
<div class="highlight"><pre><span class="code-line"><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span></span>
<span class="code-line">    <span class="c"># @param num, a list of integer</span></span>
<span class="code-line">    <span class="c"># @return a list of lists of integers</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">permute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span></span>
<span class="code-line">        <span class="n">n</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></span>
<span class="code-line">        <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span></span>
<span class="code-line">            <span class="k">return</span> <span class="p">[</span><span class="n">num</span><span class="p">]</span></span>
<span class="code-line">        <span class="n">res</span><span class="o">=</span><span class="p">[]</span></span>
<span class="code-line">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">n</span><span class="p">):</span></span>
<span class="code-line">            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">permute</span><span class="p">(</span><span class="n">num</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]):</span></span>
<span class="code-line">                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">+</span><span class="n">x</span><span class="p">)</span></span>
<span class="code-line">        <span class="k">return</span> <span class="n">res</span></span>
</pre></div>
<section>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2"
                href="../../../../../blog/2013/12/22/hui-su-yu-fen-zhi-xian-jie/#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'houcj';


    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>                </div>
            </div>
        </div>
    </div>
</div>
</section>
            

            <hr/>
<section>
    <h2>Related Posts</h2>
<ul class="related-posts-list">
<li><a href="../../../../../blog/2013/12/22/string-related/" title="字符串相关">字符串相关</a></li>
<li><a href="../../../../../blog/2014/02/18/equal-probability/" title="概率问题">概率问题</a></li>
<li><a href="../../../../../blog/2014/06/02/wei-cao-zuo/" title="位操作">位操作</a></li>
<li><a href="../../../../../blog/2015/04/25/cal24/" title="24点游戏编程">24点游戏编程</a></li>
<li><a href="../../../../../blog/2015/05/05/reverse-linked-list/" title="反转链表">反转链表</a></li>
<li><a href="../../../../../blog/2015/05/05/sifting-prime/" title="素数筛选法">素数筛选法</a></li>
<li><a href="../../../../../blog/2015/05/18/binary-tree/" title="二叉树">二叉树</a></li>
<li><a href="../../../../../blog/2015/05/28/search/" title="查找算法">查找算法</a></li>
<li><a href="../../../../../blog/2015/05/28/find-a-solution/" title="How to find a solution">How to find a solution</a></li>
<li><a href="../../../../../blog/2015/05/31/sort1/" title="排序算法">排序算法</a></li>
</ul>
<hr />
</section>

            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2013-12-22T00:00:00+08:00">Dec 22, 2013</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#编程-ref">编程</a> 
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#算法-ref">算法
                    <span>13</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://twitter.com/chaojunhou" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="https://www.tumblr.com/blog/houcj" title="My Tumblr Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-tumblr sidebar-social-links"></i></a>
    <a href="https://github.com/chaojunhou" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
            <h4>Blogroll</h4>
			<ul ><a class="category-link" href="http://www.rudy-yuan.net">Rudy-yuan</a></ul>
            <ul ><a class="category-link" href="http://www.wengweitao.com">WWT</a></ul>
            <ul ><a class="category-link" href="http://hult.tiddlyspot.com">HULT</a></ul>
       
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
        
            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

<script type="text/javascript">
    var disqus_shortname = 'houcj';

    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
        <script  language="javascript" type="text/javascript">
            function uncollapse() {
                var hash_str = window.location.hash;
                if (window.location.hash.match(/^#comment-\d+$/))
                {
                    var hash_str = '#disqus_thread';
                }
                $(hash_str).collapse({
                    toggle: true
                    })
            }
        </script>

        <script type="text/javascript" language="JavaScript">
            uncollapse(); 
        </script>
    </body>
      <!-- Baidu Button BEGIN 
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"250"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
 <!-- Baidu Button END -->
  </body>

  <!-- hitwebcounter Code START -->

<img src="http://hitwebcounter.com/counter/counter.php?page=6046616&style=0005&nbdigits=5&type=ip&initCount=0" title="" Alt=""   border="0" style="float:left">  

</html>